<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mis Pedidos</title>
  <link rel="stylesheet" href="styles.css">
  <script src="order.js" type="module"></script>
</head>
<body>
  <header class="navbar">
    <h1> Mis Pedidos</h1>
    <button id="logoutBtn">Cerrar sesi贸n</button>
  </header>

  <main class="container">
    <section id="cartSection" class="hidden">
      <h2>Tu carrito</h2>
      <div id="cartItems"></div>
      <button id="placeOrderBtn">Realizar pedido</button>
    </section>

    <section id="ordersSection">
      <h2>Pedidos realizados</h2>
      <div id="ordersList"></div>
    </section>
  </main>

  <script>
    // Cargar el carrito y los pedidos
    document.addEventListener('DOMContentLoaded', () => {
      // Cargar el carrito desde el localStorage
      const storedCart = JSON.parse(localStorage.getItem('cart')) || [];
      cart = storedCart;

      loadCart();

      // Cargar los pedidos del usuario (si tienes la l贸gica de pedidos en REST o GraphQL)
      // Aqu铆 simplemente lo estamos dejando como un ejemplo b谩sico.
      fetchOrders();
    });

    // Mostrar los pedidos
    async function fetchOrders() {
      // Suponiendo que tienes una funci贸n para obtener los pedidos del usuario.
      const ordersList = document.getElementById('ordersList');
      // Aqu铆 debes consultar los pedidos desde tu API GraphQL o REST, por ejemplo:
      const orders = await getOrders();  // Aseg煤rate de tener la funci贸n para obtener pedidos

      if (orders.length === 0) {
        ordersList.innerHTML = '<p>No tienes pedidos realizados.</p>';
      } else {
        orders.forEach(order => {
          const orderDiv = document.createElement('div');
          orderDiv.classList.add('order-card');
          orderDiv.innerHTML = `
            <p>Pedido #${order.id}</p>
            <p>Estado: ${order.status}</p>
            <p>Total: $${order.total}</p>
          `;
          ordersList.appendChild(orderDiv);
        });
      }
    }

    // Funci贸n para realizar el pedido
    document.getElementById('placeOrderBtn').addEventListener('click', placeOrder);
  </script>
</body>
</html>
